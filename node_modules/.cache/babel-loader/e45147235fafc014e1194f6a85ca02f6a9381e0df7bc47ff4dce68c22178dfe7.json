{"ast":null,"code":"// get_ips.ts\nimport { execSync } from 'child_process';\nasync function getIps() {\n  const ipMacPairs = [];\n  const arpOutput = execSync('arp -a').toString();\n  for (const line of arpOutput.split('\\n')) {\n    const parts = line.split(' ');\n    if (parts.length > 3) {\n      const ip = parts[1].replace(/[()]/g, '');\n      const mac = parts[3];\n      const serviceInfo = parts[0];\n      if (!ipMacPairs.some(pair => pair.ip === ip)) {\n        ipMacPairs.push({\n          ip,\n          mac,\n          serviceInfo\n        });\n      }\n    }\n  }\n  console.log(ipMacPairs); // for debug\n  // JSON 形式でファイルに保存\n  // Get the absolute path to the result.json file\n  const resultPath = path.join(__dirname, './scripts/result.json');\n\n  // Use the absolute path when reading/writing the file\n  fs.writeFileSync(resultPath, data);\n  return ipMacPairs;\n}\nif (require.main === module) {\n  getIps();\n}\nexport { getIps };","map":{"version":3,"names":["execSync","getIps","ipMacPairs","arpOutput","toString","line","split","parts","length","ip","replace","mac","serviceInfo","some","pair","push","console","log","resultPath","path","join","__dirname","fs","writeFileSync","data","require","main","module"],"sources":["/Users/sf/ghq/github.com/Fukuda-Sakito/device_scan/src/scripts/get_ips.ts"],"sourcesContent":["// get_ips.ts\nimport { execSync } from 'child_process';\nimport { writeFileSync } from 'fs';\n\nexport type IpMacPair = {\n  ip: string;\n  mac: string;\n  serviceInfo: string;\n};\n\nasync function getIps(): Promise<IpMacPair[]> {\n  const ipMacPairs: IpMacPair[] = [];\n  const arpOutput: string = execSync('arp -a').toString();\n\n  for (const line of arpOutput.split('\\n')) {\n    const parts: string[] = line.split(' ');\n    if (parts.length > 3) {\n      const ip: string = parts[1].replace(/[()]/g, '');\n      const mac: string = parts[3];\n      const serviceInfo: string = parts[0];\n      if (!ipMacPairs.some(pair => pair.ip === ip)) {\n        ipMacPairs.push({ ip, mac, serviceInfo });\n      }\n    }\n  }\n  console.log(ipMacPairs);  // for debug\n  // JSON 形式でファイルに保存\n  // Get the absolute path to the result.json file\n  const resultPath = path.join(__dirname, './scripts/result.json');\n\n  // Use the absolute path when reading/writing the file\n  fs.writeFileSync(resultPath, data);\n\n  return ipMacPairs;\n}\n\nif (require.main === module) {\n  getIps();\n}\n\nexport { getIps };"],"mappings":"AAAA;AACA,SAASA,QAAQ,QAAQ,eAAe;AASxC,eAAeC,MAAMA,CAAA,EAAyB;EAC5C,MAAMC,UAAuB,GAAG,EAAE;EAClC,MAAMC,SAAiB,GAAGH,QAAQ,CAAC,QAAQ,CAAC,CAACI,QAAQ,CAAC,CAAC;EAEvD,KAAK,MAAMC,IAAI,IAAIF,SAAS,CAACG,KAAK,CAAC,IAAI,CAAC,EAAE;IACxC,MAAMC,KAAe,GAAGF,IAAI,CAACC,KAAK,CAAC,GAAG,CAAC;IACvC,IAAIC,KAAK,CAACC,MAAM,GAAG,CAAC,EAAE;MACpB,MAAMC,EAAU,GAAGF,KAAK,CAAC,CAAC,CAAC,CAACG,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC;MAChD,MAAMC,GAAW,GAAGJ,KAAK,CAAC,CAAC,CAAC;MAC5B,MAAMK,WAAmB,GAAGL,KAAK,CAAC,CAAC,CAAC;MACpC,IAAI,CAACL,UAAU,CAACW,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACL,EAAE,KAAKA,EAAE,CAAC,EAAE;QAC5CP,UAAU,CAACa,IAAI,CAAC;UAAEN,EAAE;UAAEE,GAAG;UAAEC;QAAY,CAAC,CAAC;MAC3C;IACF;EACF;EACAI,OAAO,CAACC,GAAG,CAACf,UAAU,CAAC,CAAC,CAAE;EAC1B;EACA;EACA,MAAMgB,UAAU,GAAGC,IAAI,CAACC,IAAI,CAACC,SAAS,EAAE,uBAAuB,CAAC;;EAEhE;EACAC,EAAE,CAACC,aAAa,CAACL,UAAU,EAAEM,IAAI,CAAC;EAElC,OAAOtB,UAAU;AACnB;AAEA,IAAIuB,OAAO,CAACC,IAAI,KAAKC,MAAM,EAAE;EAC3B1B,MAAM,CAAC,CAAC;AACV;AAEA,SAASA,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}